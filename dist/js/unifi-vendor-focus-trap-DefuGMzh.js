import{t as ne,f as ae,i as k,g as R,a as S}from"./unifi-vendor-tabbable-lu-oW8fi.js";/*!
* focus-trap 7.6.4
* @license MIT, https://github.com/focus-trap/focus-trap/blob/master/LICENSE
*/function x(r,t){(t==null||t>r.length)&&(t=r.length);for(var o=0,u=Array(t);o<t;o++)u[o]=r[o];return u}function re(r){if(Array.isArray(r))return x(r)}function ie(r,t,o){return(t=le(t))in r?Object.defineProperty(r,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[t]=o,r}function oe(r){if(typeof Symbol!="undefined"&&r[Symbol.iterator]!=null||r["@@iterator"]!=null)return Array.from(r)}function ue(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Q(r,t){var o=Object.keys(r);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(r);t&&(u=u.filter(function(m){return Object.getOwnPropertyDescriptor(r,m).enumerable})),o.push.apply(o,u)}return o}function X(r){for(var t=1;t<arguments.length;t++){var o=arguments[t]!=null?arguments[t]:{};t%2?Q(Object(o),!0).forEach(function(u){ie(r,u,o[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(o)):Q(Object(o)).forEach(function(u){Object.defineProperty(r,u,Object.getOwnPropertyDescriptor(o,u))})}return r}function se(r){return re(r)||oe(r)||fe(r)||ue()}function ce(r,t){if(typeof r!="object"||!r)return r;var o=r[Symbol.toPrimitive];if(o!==void 0){var u=o.call(r,t);if(typeof u!="object")return u;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(r)}function le(r){var t=ce(r,"string");return typeof t=="symbol"?t:t+""}function fe(r,t){if(r){if(typeof r=="string")return x(r,t);var o={}.toString.call(r).slice(8,-1);return o==="Object"&&r.constructor&&(o=r.constructor.name),o==="Map"||o==="Set"?Array.from(r):o==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?x(r,t):void 0}}var Z={activateTrap:function(t,o){if(t.length>0){var u=t[t.length-1];u!==o&&u._setPausedState(!0)}var m=t.indexOf(o);m===-1||t.splice(m,1),t.push(o)},deactivateTrap:function(t,o){var u=t.indexOf(o);u!==-1&&t.splice(u,1),t.length>0&&!t[t.length-1]._isManuallyPaused()&&t[t.length-1]._setPausedState(!1)}},de=function(t){return t.tagName&&t.tagName.toLowerCase()==="input"&&typeof t.select=="function"},be=function(t){return(t==null?void 0:t.key)==="Escape"||(t==null?void 0:t.key)==="Esc"||(t==null?void 0:t.keyCode)===27},L=function(t){return(t==null?void 0:t.key)==="Tab"||(t==null?void 0:t.keyCode)===9},ve=function(t){return L(t)&&!t.shiftKey},pe=function(t){return L(t)&&t.shiftKey},U=function(t){return setTimeout(t,0)},K=function(t){for(var o=arguments.length,u=new Array(o>1?o-1:0),m=1;m<o;m++)u[m-1]=arguments[m];return typeof t=="function"?t.apply(void 0,u):t},B=function(t){return t.target.shadowRoot&&typeof t.composedPath=="function"?t.composedPath()[0]:t.target},me=[],he=function(t,o){var u=(o==null?void 0:o.document)||document,m=(o==null?void 0:o.trapStack)||me,f=X({returnFocusOnDeactivate:!0,escapeDeactivates:!0,delayInitialFocus:!0,isKeyForward:ve,isKeyBackward:pe},o),a={containers:[],containerGroups:[],tabbableGroups:[],nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1,manuallyPaused:!1,delayInitialFocusTimer:void 0,recentNavEvent:void 0},h,y=function(e,n,i){return e&&e[n]!==void 0?e[n]:f[i||n]},N=function(e,n){var i=typeof(n==null?void 0:n.composedPath)=="function"?n.composedPath():void 0;return a.containerGroups.findIndex(function(c){var l=c.container,b=c.tabbableNodes;return l.contains(e)||(i==null?void 0:i.includes(l))||b.find(function(s){return s===e})})},T=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=n.hasFallback,c=i===void 0?!1:i,l=n.params,b=l===void 0?[]:l,s=f[e];if(typeof s=="function"&&(s=s.apply(void 0,se(b))),s===!0&&(s=void 0),!s){if(s===void 0||s===!1)return s;throw new Error("`".concat(e,"` was specified but was not a node, or did not return a node"))}var v=s;if(typeof s=="string"){try{v=u.querySelector(s)}catch(p){throw new Error("`".concat(e,'` appears to be an invalid selector; error="').concat(p.message,'"'))}if(!v&&!c)throw new Error("`".concat(e,"` as selector refers to no known node"))}return v},E=function(){var e=T("initialFocus",{hasFallback:!0});if(e===!1)return!1;if(e===void 0||e&&!S(e,f.tabbableOptions))if(N(u.activeElement)>=0)e=u.activeElement;else{var n=a.tabbableGroups[0],i=n&&n.firstTabbableNode;e=i||T("fallbackFocus")}else e===null&&(e=T("fallbackFocus"));if(!e)throw new Error("Your focus-trap needs to have at least one focusable element");return e},P=function(){if(a.containerGroups=a.containers.map(function(e){var n=ne(e,f.tabbableOptions),i=ae(e,f.tabbableOptions),c=n.length>0?n[0]:void 0,l=n.length>0?n[n.length-1]:void 0,b=i.find(function(p){return k(p)}),s=i.slice().reverse().find(function(p){return k(p)}),v=!!n.find(function(p){return R(p)>0});return{container:e,tabbableNodes:n,focusableNodes:i,posTabIndexesFound:v,firstTabbableNode:c,lastTabbableNode:l,firstDomTabbableNode:b,lastDomTabbableNode:s,nextTabbableNode:function(F){var O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,w=n.indexOf(F);return w<0?O?i.slice(i.indexOf(F)+1).find(function(A){return k(A)}):i.slice(0,i.indexOf(F)).reverse().find(function(A){return k(A)}):n[w+(O?1:-1)]}}}),a.tabbableGroups=a.containerGroups.filter(function(e){return e.tabbableNodes.length>0}),a.tabbableGroups.length<=0&&!T("fallbackFocus"))throw new Error("Your focus-trap must have at least one container with at least one tabbable node in it at all times");if(a.containerGroups.find(function(e){return e.posTabIndexesFound})&&a.containerGroups.length>1)throw new Error("At least one node with a positive tabindex was found in one of your focus-trap's multiple containers. Positive tabindexes are only supported in single-container focus-traps.")},G=function(e){var n=e.activeElement;if(n)return n.shadowRoot&&n.shadowRoot.activeElement!==null?G(n.shadowRoot):n},g=function(e){if(e!==!1&&e!==G(document)){if(!e||!e.focus){g(E());return}e.focus({preventScroll:!!f.preventScroll}),a.mostRecentlyFocusedNode=e,de(e)&&e.select()}},M=function(e){var n=T("setReturnFocus",{params:[e]});return n||(n===!1?!1:e)},$=function(e){var n=e.target,i=e.event,c=e.isBackward,l=c===void 0?!1:c;n=n||B(i),P();var b=null;if(a.tabbableGroups.length>0){var s=N(n,i),v=s>=0?a.containerGroups[s]:void 0;if(s<0)l?b=a.tabbableGroups[a.tabbableGroups.length-1].lastTabbableNode:b=a.tabbableGroups[0].firstTabbableNode;else if(l){var p=a.tabbableGroups.findIndex(function(I){var _=I.firstTabbableNode;return n===_});if(p<0&&(v.container===n||S(n,f.tabbableOptions)&&!k(n,f.tabbableOptions)&&!v.nextTabbableNode(n,!1))&&(p=s),p>=0){var F=p===0?a.tabbableGroups.length-1:p-1,O=a.tabbableGroups[F];b=R(n)>=0?O.lastTabbableNode:O.lastDomTabbableNode}else L(i)||(b=v.nextTabbableNode(n,!1))}else{var w=a.tabbableGroups.findIndex(function(I){var _=I.lastTabbableNode;return n===_});if(w<0&&(v.container===n||S(n,f.tabbableOptions)&&!k(n,f.tabbableOptions)&&!v.nextTabbableNode(n))&&(w=s),w>=0){var A=w===a.tabbableGroups.length-1?0:w+1,J=a.tabbableGroups[A];b=R(n)>=0?J.firstTabbableNode:J.firstDomTabbableNode}else L(i)||(b=v.nextTabbableNode(n))}}else b=T("fallbackFocus");return b},j=function(e){var n=B(e);if(!(N(n,e)>=0)){if(K(f.clickOutsideDeactivates,e)){h.deactivate({returnFocus:f.returnFocusOnDeactivate});return}K(f.allowOutsideClick,e)||e.preventDefault()}},H=function(e){var n=B(e),i=N(n,e)>=0;if(i||n instanceof Document)i&&(a.mostRecentlyFocusedNode=n);else{e.stopImmediatePropagation();var c,l=!0;if(a.mostRecentlyFocusedNode)if(R(a.mostRecentlyFocusedNode)>0){var b=N(a.mostRecentlyFocusedNode),s=a.containerGroups[b].tabbableNodes;if(s.length>0){var v=s.findIndex(function(p){return p===a.mostRecentlyFocusedNode});v>=0&&(f.isKeyForward(a.recentNavEvent)?v+1<s.length&&(c=s[v+1],l=!1):v-1>=0&&(c=s[v-1],l=!1))}}else a.containerGroups.some(function(p){return p.tabbableNodes.some(function(F){return R(F)>0})})||(l=!1);else l=!1;l&&(c=$({target:a.mostRecentlyFocusedNode,isBackward:f.isKeyBackward(a.recentNavEvent)})),g(c||a.mostRecentlyFocusedNode||E())}a.recentNavEvent=void 0},ee=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;a.recentNavEvent=e;var i=$({event:e,isBackward:n});i&&(L(e)&&e.preventDefault(),g(i))},q=function(e){(f.isKeyForward(e)||f.isKeyBackward(e))&&ee(e,f.isKeyBackward(e))},Y=function(e){be(e)&&K(f.escapeDeactivates,e)!==!1&&(e.preventDefault(),h.deactivate())},V=function(e){var n=B(e);N(n,e)>=0||K(f.clickOutsideDeactivates,e)||K(f.allowOutsideClick,e)||(e.preventDefault(),e.stopImmediatePropagation())},W=function(){if(a.active)return Z.activateTrap(m,h),a.delayInitialFocusTimer=f.delayInitialFocus?U(function(){g(E())}):g(E()),u.addEventListener("focusin",H,!0),u.addEventListener("mousedown",j,{capture:!0,passive:!1}),u.addEventListener("touchstart",j,{capture:!0,passive:!1}),u.addEventListener("click",V,{capture:!0,passive:!1}),u.addEventListener("keydown",q,{capture:!0,passive:!1}),u.addEventListener("keydown",Y),h},z=function(){if(a.active)return u.removeEventListener("focusin",H,!0),u.removeEventListener("mousedown",j,!0),u.removeEventListener("touchstart",j,!0),u.removeEventListener("click",V,!0),u.removeEventListener("keydown",q,!0),u.removeEventListener("keydown",Y),h},te=function(e){var n=e.some(function(i){var c=Array.from(i.removedNodes);return c.some(function(l){return l===a.mostRecentlyFocusedNode})});n&&g(E())},C=typeof window!="undefined"&&"MutationObserver"in window?new MutationObserver(te):void 0,D=function(){C&&(C.disconnect(),a.active&&!a.paused&&a.containers.map(function(e){C.observe(e,{subtree:!0,childList:!0})}))};return h={get active(){return a.active},get paused(){return a.paused},activate:function(e){if(a.active)return this;var n=y(e,"onActivate"),i=y(e,"onPostActivate"),c=y(e,"checkCanFocusTrap");c||P(),a.active=!0,a.paused=!1,a.nodeFocusedBeforeActivation=u.activeElement,n==null||n();var l=function(){c&&P(),W(),D(),i==null||i()};return c?(c(a.containers.concat()).then(l,l),this):(l(),this)},deactivate:function(e){if(!a.active)return this;var n=X({onDeactivate:f.onDeactivate,onPostDeactivate:f.onPostDeactivate,checkCanReturnFocus:f.checkCanReturnFocus},e);clearTimeout(a.delayInitialFocusTimer),a.delayInitialFocusTimer=void 0,z(),a.active=!1,a.paused=!1,D(),Z.deactivateTrap(m,h);var i=y(n,"onDeactivate"),c=y(n,"onPostDeactivate"),l=y(n,"checkCanReturnFocus"),b=y(n,"returnFocus","returnFocusOnDeactivate");i==null||i();var s=function(){U(function(){b&&g(M(a.nodeFocusedBeforeActivation)),c==null||c()})};return b&&l?(l(M(a.nodeFocusedBeforeActivation)).then(s,s),this):(s(),this)},pause:function(e){return a.active?(a.manuallyPaused=!0,this._setPausedState(!0,e)):this},unpause:function(e){return a.active?(a.manuallyPaused=!1,m[m.length-1]!==this?this:this._setPausedState(!1,e)):this},updateContainerElements:function(e){var n=[].concat(e).filter(Boolean);return a.containers=n.map(function(i){return typeof i=="string"?u.querySelector(i):i}),a.active&&P(),D(),this}},Object.defineProperties(h,{_isManuallyPaused:{value:function(){return a.manuallyPaused}},_setPausedState:{value:function(e,n){if(a.paused===e)return this;if(a.paused=e,e){var i=y(n,"onPause"),c=y(n,"onPostPause");i==null||i(),z(),D(),c==null||c()}else{var l=y(n,"onUnpause"),b=y(n,"onPostUnpause");l==null||l(),P(),W(),D(),b==null||b()}return this}}}),h.updateContainerElements(t),h};export{he as c};
