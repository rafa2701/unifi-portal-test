const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["js/ReportLayout-C5jTyJY0.js","js/unifi-vendor-vue-router-GxXeWd4k.js","js/unifi-vendor-@vue-BH5BUbdD.js","js/main-DE9f1_IK.js","css/main-DtMGVECO.css","js/unifi-vendor-pinia-DpOm-O93.js","js/unifi-vendor-jspdf-CB9eJ5jE.js","js/unifi-vendor-core-js-Fli6k-j9.js","js/unifi-vendor-@babel-BgpAVVkQ.js","js/unifi-vendor-fflate-DkrNj-7V.js","js/BaseSelect-CHtD1inW.js","js/unifi-vendor-lucide-vue-next-KuQULOd8.js","js/unifi-vendor-tom-select-Dbt2A7YI.js","js/unifi-vendor-@orchidjs-BHPRxGz6.js","css/unifi-vendor-tom-select-DQKaNtan.css","css/BaseSelect-C99n_JMd.css","js/BaseCard-CT8UykvB.js","css/BaseCard-u5B5UTzE.css","js/unifi-vendor-vue-final-modal-BHQnw4HA.js","js/unifi-vendor-@vueuse-C3CZYosC.js","js/unifi-vendor-focus-trap-DefuGMzh.js","js/unifi-vendor-tabbable-lu-oW8fi.js","js/unifi-vendor-axios-C0aMl-mx.js","css/ReportLayout-uBcWDTw0.css","js/ModernReport-Bl93nnJv.js","js/unifi-vendor-html2pdf.js-DddM_0kN.js","js/unifi-vendor-html2canvas-S0bfYxZu.js","css/ModernReport-s3SzpQGk.css","js/LegacyReport-CtAL9Giz.js"])))=>i.map(i=>d[i]);
import{c as h,D as f,N as s,B as C,V as y,z as a,E as d,H as v,W as L,T as J,y as $,X as D,K,J as Z,r as _,s as q,Y as P,Z as Q}from"./unifi-vendor-@vue-BH5BUbdD.js";import{d as x,c as ee}from"./unifi-vendor-pinia-DpOm-O93.js";import{u as k,c as te,a as oe}from"./unifi-vendor-vue-router-GxXeWd4k.js";import{_ as R}from"./main-DE9f1_IK.js";import{_ as A}from"./unifi-vendor-jspdf-CB9eJ5jE.js";import{_ as B,a as V}from"./BaseSelect-CHtD1inW.js";import{_ as N}from"./BaseCard-CT8UykvB.js";import{X as se,I as U,C as O,T,a as b}from"./unifi-vendor-lucide-vue-next-KuQULOd8.js";import"./unifi-vendor-vue-final-modal-BHQnw4HA.js";import{a as ne}from"./unifi-vendor-axios-C0aMl-mx.js";import"./unifi-vendor-core-js-Fli6k-j9.js";import"./unifi-vendor-@babel-BgpAVVkQ.js";import"./unifi-vendor-fflate-DkrNj-7V.js";import"./unifi-vendor-tom-select-Dbt2A7YI.js";import"./unifi-vendor-@orchidjs-BHPRxGz6.js";import"./unifi-vendor-@vueuse-C3CZYosC.js";import"./unifi-vendor-focus-trap-DefuGMzh.js";import"./unifi-vendor-tabbable-lu-oW8fi.js";const I=x("controller",{state:()=>({controllers:[],selectedController:null,selectedSite:"",connectionState:"disconnected"}),getters:{isControllerSelected:e=>!!e.selectedController,isSiteSelected:e=>!!e.selectedSite,controllerOptions:e=>e.controllers.map(t=>({label:t.name,value:t.key})),siteOptions:e=>e.selectedController?e.selectedController.sites.map(t=>({label:t,value:t})):[],hasSelection:e=>e.selectedController&&e.selectedSite},actions:{setControllers(e){this.controllers=e},setSelectedController(e){this.selectedController=this.controllers.find(t=>t.key===e)||null,this.selectedSite=""},setSelectedSite(e){this.selectedSite=e},clearController(){this.selectedController=null,this.selectedSite=""},clearSelection(){this.selectedController=null,this.selectedSite=""},setConnectionState(e){this.connectionState=e}}}),m={API:{AJAX:{URL:UnifiPortalData.ajax.url,NONCE:UnifiPortalData.ajax.nonce},REST:{URL:UnifiPortalData.rest.url,NONCE:UnifiPortalData.rest.nonce}},SYSTEM_TYPES:{MODERN:"modern"},ROUTES:{PORTAL:"portal",REPORTS:"reports",REPORTS_MODERN:"reports-modern",REPORTS_LEGACY:"reports-legacy"}},re={name:"AppHeader",setup(){const e=I(),t=k(),n=()=>{t.push({name:m.ROUTES.PORTAL})},o=h(()=>e.selectedController&&e.selectedSite),c=h(()=>{var r;return((r=e.selectedController)==null?void 0:r.name)||""}),i=h(()=>e.selectedSite||"");return{hasControllerSelection:o,controllerName:c,selectedSite:i,navigateHome:n}}},le={class:"app-header"},ie=["src"],ae={key:0,class:"header-info"},ce={class:"info-item"},de={class:"info-value"},ue={class:"info-item"},pe={class:"info-value"};function me(e,t,n,o,c,i){return a(),f("header",le,[s("div",{class:"header-logo",role:"button",onClick:t[0]||(t[0]=(...r)=>o.navigateHome&&o.navigateHome(...r))},[s("img",{src:e.$img("icons/unifi-logo.svg"),alt:"UniFi Logo"},null,8,ie)]),o.hasControllerSelection?(a(),f("div",ae,[s("div",ce,[t[1]||(t[1]=s("span",{class:"info-label"},"Controller:",-1)),s("span",de,y(o.controllerName),1)]),s("div",ue,[t[2]||(t[2]=s("span",{class:"info-label"},"Site:",-1)),s("span",pe,y(o.selectedSite),1)])])):C("",!0)])}const F=R(re,[["render",me]]),fe={name:"AppLayout",components:{AppHeader:F}},_e={class:"app-layout"},he={class:"layout-main"},ge={class:"layout-content"};function Se(e,t,n,o,c,i){const r=F,l=L("router-view");return a(),f("div",_e,[d(r),s("main",he,[s("div",ge,[d(l,null,{default:v(({Component:S})=>[d(J,{name:"fade",mode:"out-in"},{default:v(()=>[(a(),$(D(S)))]),_:2},1024)]),_:1})])])])}const H=R(fe,[["render",Se]]),Ce={name:"UnifiPortal",components:{AppLayout:H}},ve={id:"unifi-portal"};function Re(e,t,n,o,c,i){const r=H;return a(),f("div",ve,[d(r)])}const ye=R(Ce,[["render",Re]]),Ee={name:"BaseAlert",components:{AlertCircle:b,AlertTriangle:T,CheckCircle:O,Info:U,X:se},props:{type:{type:String,default:"info",validator:e=>["info","success","warning","error"].includes(e)},title:{type:String,default:""},show:{type:Boolean,default:!0},dismissible:{type:Boolean,default:!1}},emits:["dismiss","update:show"],setup(e,{emit:t}){return{alertIcon:h(()=>{switch(e.type){case"success":return O;case"warning":return T;case"error":return b;default:return U}}),handleDismiss:()=>{t("update:show",!1),t("dismiss")}}}},$e={class:"alert-icon"},Ae={class:"alert-content"},we={key:0,class:"alert-title"},Pe={class:"alert-message"};function Ue(e,t,n,o,c,i){const r=L("X");return n.show?(a(),f("div",{key:0,class:Z(["base-alert",[`alert-${n.type}`,{"alert-dismissible":n.dismissible}]]),role:"alert"},[s("div",$e,[(a(),$(D(o.alertIcon)))]),s("div",Ae,[n.title?(a(),f("div",we,y(n.title),1)):C("",!0),s("div",Pe,[K(e.$slots,"default")])]),n.dismissible?(a(),f("button",{key:0,class:"alert-dismiss",onClick:t[0]||(t[0]=(...l)=>o.handleDismiss&&o.handleDismiss(...l)),"aria-label":"Dismiss alert"},[d(r)])):C("",!0)],2)):C("",!0)}const M=R(Ee,[["render",Ue]]);function Oe(){const e=_({show:!1,type:"info",title:"",message:""});return{alert:e,showAlert:(o,c,i)=>{e.value={show:!0,type:o,title:c,message:i}},clearAlert:()=>{e.value.show=!1}}}const Te=()=>ne.create({baseURL:m.API.REST.URL,headers:{"X-WP-Nonce":m.API.REST.NONCE,"Content-Type":"application/json"},withCredentials:!0}),be={fetchControllers:async()=>{try{return(await Te().get("fetch-controllers")).data}catch(e){throw console.error("Failed to fetch controllers:",e),e}}};function Le(){const e=k(),t=I(),{alert:n,showAlert:o,clearAlert:c}=Oe(),i=_(!1),r=_(""),l=_(""),S=_(!1),E=_(""),u=_(""),Y=h(()=>t.controllerOptions),W=h(()=>{if(!l.value)return[];const p=t.controllers.find(g=>g.key===l.value);return p?p.sites.map(g=>({label:g,value:g})):[]}),w=h(()=>l.value&&u.value),j=async()=>{try{i.value=!0,r.value="",o("info","Loading","Loading controllers...");const p=await be.fetchControllers();if(p.status==="success")t.setControllers(p.data.controllers),o("success","Success","Controllers loaded successfully");else throw new Error("Failed to load controllers")}catch(p){console.error("Error loading controllers:",p),r.value="Failed to load controllers",o("error","Error","Failed to load controllers")}finally{i.value=!1}},z=()=>{u.value="",l.value?t.setSelectedController(l.value):t.clearSelection()},G=()=>{!w.value||!t.controllers.find(g=>g.key===l.value)||(t.setSelectedController(l.value),t.setSelectedSite(u.value),t.setConnectionState("connected"),e.push({name:m.ROUTES.REPORTS}))};return q(()=>{t.clearSelection(),j()}),{alert:n,isLoading:i,controllerError:r,selectedController:l,sitesLoading:S,siteError:E,selectedSite:u,controllerOptions:Y,siteOptions:W,canViewReports:w,clearAlert:c,handleControllerChange:z,handleViewButtonClick:G}}const De={name:"UnifiHome",components:{BaseAlert:M,BaseButton:V,BaseCard:N,BaseSelect:B},setup(){return Le()}},ke={class:"unifi-home"},Be={class:"welcome-section"},Ve=["src"],Ne={class:"selection-section"},Ie={class:"selection-form"},Fe={class:"action-section"};function He(e,t,n,o,c,i){const r=M,l=B,S=N,E=V;return a(),f("div",ke,[s("section",Be,[s("img",{src:e.$img("icons/unifi-logo.svg"),alt:"UniFi Logo",class:"welcome-logo"},null,8,Ve),t[2]||(t[2]=s("h1",null,"Welcome to UniFi Portal",-1)),t[3]||(t[3]=s("p",{class:"welcome-subtitle"}," Your central hub for fetching network reports. ",-1))]),s("section",Ne,[e.alert.show?(a(),$(r,{key:0,type:e.alert.type,title:e.alert.title,show:e.alert.show,dismissible:"",onDismiss:e.clearAlert},{default:v(()=>[P(y(e.alert.message),1)]),_:1},8,["type","title","show","onDismiss"])):C("",!0),d(S,null,{default:v(()=>[s("div",Ie,[d(l,{modelValue:e.selectedController,"onUpdate:modelValue":t[0]||(t[0]=u=>e.selectedController=u),options:e.controllerOptions,label:"Controller",placeholder:"Select a controller",disabled:e.isLoading,loading:e.isLoading,error:e.controllerError,onChange:e.handleControllerChange},null,8,["modelValue","options","disabled","loading","error","onChange"]),d(l,{modelValue:e.selectedSite,"onUpdate:modelValue":t[1]||(t[1]=u=>e.selectedSite=u),options:e.siteOptions,label:"Site",placeholder:"Select a site",disabled:!e.selectedController||e.sitesLoading,loading:e.sitesLoading,error:e.siteError},null,8,["modelValue","options","disabled","loading","error"])])]),_:1})]),s("section",Fe,[d(E,{variant:"primary",size:"lg",disabled:!e.canViewReports,onClick:e.handleViewButtonClick},{default:v(()=>t[4]||(t[4]=[P(" View Reports ")])),_:1},8,["disabled","onClick"])])])}const Me=R(De,[["render",He]]),Xe=()=>A(()=>import("./ReportLayout-C5jTyJY0.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23])),Ye=()=>A(()=>import("./ModernReport-Bl93nnJv.js"),__vite__mapDeps([24,3,4,2,1,25,7,6,8,9,26,5,10,11,12,13,14,15,16,17,18,19,20,21,22,27])),We=()=>A(()=>import("./LegacyReport-CtAL9Giz.js"),__vite__mapDeps([28,3,4])),je=[{path:"/",name:m.ROUTES.PORTAL,component:Me,meta:{title:"UniFi Portal - Home"}},{path:"/reports",name:m.ROUTES.REPORTS,component:Xe,meta:{title:"UniFi Portal - Reports"},children:[{path:"modern",name:m.ROUTES.REPORTS_MODERN,component:Ye,meta:{title:"UniFi Portal - Modern Report"}},{path:"legacy",name:m.ROUTES.REPORTS_LEGACY,component:We,meta:{title:"UniFi Portal - Legacy Report"}}]}],X=te({history:oe(),routes:je});X.beforeEach((e,t,n)=>{document.title=e.meta.title||"UniFi Portal",n()});function ze(e){return!e||typeof e!="string"||e.trim()===""?(console.warn("Image path is empty. Returning default placeholder."),`${UnifiPortalData.image.url}/icons/placeholder.svg`):`${UnifiPortalData.image.url}/${e}`}const Ge=()=>{const e=Q(ye),t=ee();return e.use(X),e.use(t),e.config.globalProperties.$unifi=UnifiPortalData,e.config.globalProperties.$img=ze,e.mount("#unifi-portal-render"),e};Ge();export{m as U,I as u};
