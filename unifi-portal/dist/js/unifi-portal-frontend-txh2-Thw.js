const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["js/ReportLayout-DeeboIHF.js","js/unifi-vendor-vue-router-GxXeWd4k.js","js/unifi-vendor-@vue-BH5BUbdD.js","js/main-DE9f1_IK.js","css/main-DtMGVECO.css","js/unifi-vendor-pinia-DpOm-O93.js","js/unifi-vendor-jspdf-CB9eJ5jE.js","js/unifi-vendor-core-js-Fli6k-j9.js","js/unifi-vendor-@babel-BgpAVVkQ.js","js/unifi-vendor-fflate-DkrNj-7V.js","js/BaseSelect-CHtD1inW.js","js/unifi-vendor-lucide-vue-next-KuQULOd8.js","js/unifi-vendor-tom-select-Dbt2A7YI.js","js/unifi-vendor-@orchidjs-BHPRxGz6.js","css/unifi-vendor-tom-select-DQKaNtan.css","css/BaseSelect-C99n_JMd.css","js/BaseCard-CT8UykvB.js","css/BaseCard-u5B5UTzE.css","js/unifi-vendor-vue-final-modal-BHQnw4HA.js","js/unifi-vendor-@vueuse-C3CZYosC.js","js/unifi-vendor-focus-trap-DefuGMzh.js","js/unifi-vendor-tabbable-lu-oW8fi.js","css/ReportLayout-uBcWDTw0.css","js/ModernReport-CwLrWpgv.js","js/unifi-vendor-html2pdf.js-DddM_0kN.js","js/unifi-vendor-html2canvas-S0bfYxZu.js","css/ModernReport-s3SzpQGk.css","js/LegacyReport-CtAL9Giz.js"])))=>i.map(i=>d[i]);
import{c as h,D as f,N as s,B as C,V as R,z as a,E as d,H as v,W as L,T as G,y as E,X as k,K,J as Z,r as _,s as q,Y as P,Z as Q}from"./unifi-vendor-@vue-BH5BUbdD.js";import{d as x,c as ee}from"./unifi-vendor-pinia-DpOm-O93.js";import{u as D,c as te,a as oe}from"./unifi-vendor-vue-router-GxXeWd4k.js";import{_ as y}from"./main-DE9f1_IK.js";import{_ as w}from"./unifi-vendor-jspdf-CB9eJ5jE.js";import{_ as B,a as V}from"./BaseSelect-CHtD1inW.js";import{_ as N}from"./BaseCard-CT8UykvB.js";import{X as se,I as U,C as O,T,a as b}from"./unifi-vendor-lucide-vue-next-KuQULOd8.js";import"./unifi-vendor-vue-final-modal-BHQnw4HA.js";import"./unifi-vendor-core-js-Fli6k-j9.js";import"./unifi-vendor-@babel-BgpAVVkQ.js";import"./unifi-vendor-fflate-DkrNj-7V.js";import"./unifi-vendor-tom-select-Dbt2A7YI.js";import"./unifi-vendor-@orchidjs-BHPRxGz6.js";import"./unifi-vendor-@vueuse-C3CZYosC.js";import"./unifi-vendor-focus-trap-DefuGMzh.js";import"./unifi-vendor-tabbable-lu-oW8fi.js";const H=x("controller",{state:()=>({controllers:[],selectedController:null,selectedSite:"",connectionState:"disconnected"}),getters:{isControllerSelected:e=>!!e.selectedController,isSiteSelected:e=>!!e.selectedSite,controllerOptions:e=>e.controllers.map(t=>({label:t.name,value:t.key})),siteOptions:e=>e.selectedController?e.selectedController.sites.map(t=>({label:t,value:t})):[],hasSelection:e=>e.selectedController&&e.selectedSite},actions:{setControllers(e){this.controllers=e},setSelectedController(e){this.selectedController=this.controllers.find(t=>t.key===e)||null,this.selectedSite=""},setSelectedSite(e){this.selectedSite=e},clearController(){this.selectedController=null,this.selectedSite=""},clearSelection(){this.selectedController=null,this.selectedSite=""},setConnectionState(e){this.connectionState=e}}}),g={API:{AJAX:{URL:UnifiPortalData.ajax.url,NONCE:UnifiPortalData.ajax.nonce},REST:{URL:UnifiPortalData.rest.url,NONCE:UnifiPortalData.rest.nonce}},SYSTEM_TYPES:{MODERN:"modern"},ROUTES:{PORTAL:"portal",REPORTS:"reports",REPORTS_MODERN:"reports-modern",REPORTS_LEGACY:"reports-legacy"}},ne={name:"AppHeader",setup(){const e=H(),t=D(),n=()=>{t.push({name:g.ROUTES.PORTAL})},o=h(()=>e.selectedController&&e.selectedSite),c=h(()=>{var r;return((r=e.selectedController)==null?void 0:r.name)||""}),i=h(()=>e.selectedSite||"");return{hasControllerSelection:o,controllerName:c,selectedSite:i,navigateHome:n}}},re={class:"app-header"},le=["src"],ie={key:0,class:"header-info"},ae={class:"info-item"},ce={class:"info-value"},de={class:"info-item"},ue={class:"info-value"};function me(e,t,n,o,c,i){return a(),f("header",re,[s("div",{class:"header-logo",role:"button",onClick:t[0]||(t[0]=(...r)=>o.navigateHome&&o.navigateHome(...r))},[s("img",{src:e.$img("icons/unifi-logo.svg"),alt:"UniFi Logo"},null,8,le)]),o.hasControllerSelection?(a(),f("div",ie,[s("div",ae,[t[1]||(t[1]=s("span",{class:"info-label"},"Controller:",-1)),s("span",ce,R(o.controllerName),1)]),s("div",de,[t[2]||(t[2]=s("span",{class:"info-label"},"Site:",-1)),s("span",ue,R(o.selectedSite),1)])])):C("",!0)])}const I=y(ne,[["render",me]]),pe={name:"AppLayout",components:{AppHeader:I}},fe={class:"app-layout"},_e={class:"layout-main"},he={class:"layout-content"};function ge(e,t,n,o,c,i){const r=I,l=L("router-view");return a(),f("div",fe,[d(r),s("main",_e,[s("div",he,[d(l,null,{default:v(({Component:S})=>[d(G,{name:"fade",mode:"out-in"},{default:v(()=>[(a(),E(k(S)))]),_:2},1024)]),_:1})])])])}const F=y(pe,[["render",ge]]),Se={name:"UnifiPortal",components:{AppLayout:F}},Ce={id:"unifi-portal"};function ve(e,t,n,o,c,i){const r=F;return a(),f("div",Ce,[d(r)])}const ye=y(Se,[["render",ve]]),Re={name:"BaseAlert",components:{AlertCircle:b,AlertTriangle:T,CheckCircle:O,Info:U,X:se},props:{type:{type:String,default:"info",validator:e=>["info","success","warning","error"].includes(e)},title:{type:String,default:""},show:{type:Boolean,default:!0},dismissible:{type:Boolean,default:!1}},emits:["dismiss","update:show"],setup(e,{emit:t}){return{alertIcon:h(()=>{switch(e.type){case"success":return O;case"warning":return T;case"error":return b;default:return U}}),handleDismiss:()=>{t("update:show",!1),t("dismiss")}}}},$e={class:"alert-icon"},Ee={class:"alert-content"},we={key:0,class:"alert-title"},Ae={class:"alert-message"};function Pe(e,t,n,o,c,i){const r=L("X");return n.show?(a(),f("div",{key:0,class:Z(["base-alert",[`alert-${n.type}`,{"alert-dismissible":n.dismissible}]]),role:"alert"},[s("div",$e,[(a(),E(k(o.alertIcon)))]),s("div",Ee,[n.title?(a(),f("div",we,R(n.title),1)):C("",!0),s("div",Ae,[K(e.$slots,"default")])]),n.dismissible?(a(),f("button",{key:0,class:"alert-dismiss",onClick:t[0]||(t[0]=(...l)=>o.handleDismiss&&o.handleDismiss(...l)),"aria-label":"Dismiss alert"},[d(r)])):C("",!0)],2)):C("",!0)}const M=y(Re,[["render",Pe]]);function Ue(){const e=_({show:!1,type:"info",title:"",message:""});return{alert:e,showAlert:(o,c,i)=>{e.value={show:!0,type:o,title:c,message:i}},clearAlert:()=>{e.value.show=!1}}}function Oe(){const e=D(),t=H(),{alert:n,showAlert:o,clearAlert:c}=Ue(),i=_(!1),r=_(""),l=_(""),S=_(!1),$=_(""),u=_(""),X=h(()=>t.controllerOptions),z=h(()=>{if(!l.value)return[];const m=t.controllers.find(p=>p.key===l.value);return m?m.sites.map(p=>({label:p,value:p})):[]}),A=h(()=>l.value&&u.value),j=async()=>{try{i.value=!0,r.value="",o("info","Loading","Loading controllers..."),await new Promise(p=>setTimeout(p,1e3));const m={status:"success",data:{controllers:[{name:"Thundering Surf UDM-Pro",key:"4g==",system:"modern",sites:["default"]},{name:"SBSNJ",key:"4w==",system:"legacy",sites:["default","d6xnexrb","xzethxa3","a07ukd7h","15tatef9","lwjr3rse"]},{name:"Sea Shell Resort",key:"6ws=",system:"modern",sites:["default"]}]}};m.status==="success"&&(t.setControllers(m.data.controllers),o("success","Success","Controllers loaded successfully"))}catch(m){console.error("Error loading controllers:",m),r.value="Failed to load controllers",o("error","Error","Failed to load controllers")}finally{i.value=!1}},J=()=>{u.value="",l.value?t.setSelectedController(l.value):t.clearSelection()},W=()=>{!A.value||!t.controllers.find(p=>p.key===l.value)||(t.setSelectedController(l.value),t.setSelectedSite(u.value),t.setConnectionState("connected"),e.push({name:g.ROUTES.REPORTS}))};return q(()=>{t.clearSelection(),j()}),{alert:n,isLoading:i,controllerError:r,selectedController:l,sitesLoading:S,siteError:$,selectedSite:u,controllerOptions:X,siteOptions:z,canViewReports:A,clearAlert:c,handleControllerChange:J,handleViewButtonClick:W}}const Te={name:"UnifiHome",components:{BaseAlert:M,BaseButton:V,BaseCard:N,BaseSelect:B},setup(){return Oe()}},be={class:"unifi-home"},Le={class:"welcome-section"},ke=["src"],De={class:"selection-section"},Be={class:"selection-form"},Ve={class:"action-section"};function Ne(e,t,n,o,c,i){const r=M,l=B,S=N,$=V;return a(),f("div",be,[s("section",Le,[s("img",{src:e.$img("icons/unifi-logo.svg"),alt:"UniFi Logo",class:"welcome-logo"},null,8,ke),t[2]||(t[2]=s("h1",null,"Welcome to UniFi Portal",-1)),t[3]||(t[3]=s("p",{class:"welcome-subtitle"}," Your central hub for fetching network reports. ",-1))]),s("section",De,[e.alert.show?(a(),E(r,{key:0,type:e.alert.type,title:e.alert.title,show:e.alert.show,dismissible:"",onDismiss:e.clearAlert},{default:v(()=>[P(R(e.alert.message),1)]),_:1},8,["type","title","show","onDismiss"])):C("",!0),d(S,null,{default:v(()=>[s("div",Be,[d(l,{modelValue:e.selectedController,"onUpdate:modelValue":t[0]||(t[0]=u=>e.selectedController=u),options:e.controllerOptions,label:"Controller",placeholder:"Select a controller",disabled:e.isLoading,loading:e.isLoading,error:e.controllerError,onChange:e.handleControllerChange},null,8,["modelValue","options","disabled","loading","error","onChange"]),d(l,{modelValue:e.selectedSite,"onUpdate:modelValue":t[1]||(t[1]=u=>e.selectedSite=u),options:e.siteOptions,label:"Site",placeholder:"Select a site",disabled:!e.selectedController||e.sitesLoading,loading:e.sitesLoading,error:e.siteError},null,8,["modelValue","options","disabled","loading","error"])])]),_:1})]),s("section",Ve,[d($,{variant:"primary",size:"lg",disabled:!e.canViewReports,onClick:e.handleViewButtonClick},{default:v(()=>t[4]||(t[4]=[P(" View Reports ")])),_:1},8,["disabled","onClick"])])])}const He=y(Te,[["render",Ne]]),Ie=()=>w(()=>import("./ReportLayout-DeeboIHF.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22])),Fe=()=>w(()=>import("./ModernReport-CwLrWpgv.js"),__vite__mapDeps([23,3,4,2,1,24,7,6,8,9,25,5,10,11,12,13,14,15,16,17,18,19,20,21,26])),Me=()=>w(()=>import("./LegacyReport-CtAL9Giz.js"),__vite__mapDeps([27,3,4])),Ye=[{path:"/",name:g.ROUTES.PORTAL,component:He,meta:{title:"UniFi Portal - Home"}},{path:"/reports",name:g.ROUTES.REPORTS,component:Ie,meta:{title:"UniFi Portal - Reports"},children:[{path:"modern",name:g.ROUTES.REPORTS_MODERN,component:Fe,meta:{title:"UniFi Portal - Modern Report"}},{path:"legacy",name:g.ROUTES.REPORTS_LEGACY,component:Me,meta:{title:"UniFi Portal - Legacy Report"}}]}],Y=te({history:oe(),routes:Ye});Y.beforeEach((e,t,n)=>{document.title=e.meta.title||"UniFi Portal",n()});function Xe(e){return!e||typeof e!="string"||e.trim()===""?(console.warn("Image path is empty. Returning default placeholder."),`${UnifiPortalData.image.url}/icons/placeholder.svg`):`${UnifiPortalData.image.url}/${e}`}const ze=()=>{const e=Q(ye),t=ee();return e.use(Y),e.use(t),e.config.globalProperties.$unifi=UnifiPortalData,e.config.globalProperties.$img=Xe,e.mount("#unifi-portal-render"),e};ze();export{g as U,H as u};
